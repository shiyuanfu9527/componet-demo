import{r as a,d as E,e as w,o as u,c,h as g,z as C,i as d,w as v,u as b,q as M,b as _,F as B,v as L,t as f,A as S,T as A,B as $}from"./index-39026e69.js";function F(r){const l=a(!1),o=a(0),s=a(0),i=t=>{t.preventDefault(),t.stopPropagation(),l.value=!0,o.value=t.clientX,s.value=t.clientY};function e(){l.value=!1}return E(()=>{r.value.addEventListener("contextmenu",i),window.addEventListener("click",e,!0),window.addEventListener("contextmenu",e,!0)}),w(()=>{r.value.removeEventListener("contextmenu",i),window.removeEventListener("click",e,!0),window.removeEventListener("contextmenu",e,!0)}),{showMenu:l,x:o,y:s}}const N={class:"menu-list"},T=["onClick"],h={__name:"index",props:{menu:{type:Array,default:()=>[]}},emits:["select"],setup(r,{emit:l}){const o=a(null),{x:s,y:i,showMenu:e}=F(o);function t(n){e.value=!1,l("select",n)}function y(n){n.style.height=0}function x(n){n.style.height="auto";const p=n.clientHeight;n.style.height=0,requestAnimationFrame(()=>{n.style.height=p+"px",n.style.transition=".5s"})}function k(n){n.style.transition="none"}return(n,p)=>(u(),c("div",{ref_key:"containerRef",ref:o},[g(n.$slots,"default"),(u(),C($,{to:"body"},[d(A,{onBeforeEnter:y,onEnter:x,onAfterEnter:k},{default:v(()=>[b(e)?(u(),c("div",{key:0,class:"context-menu",style:M({left:b(s)+"px",top:b(i)+"px"})},[_("div",N,[(u(!0),c(B,null,L(r.menu,(m,q)=>(u(),c("div",{onClick:z=>t(m),class:"menu-item",key:m.label},f(m.label),9,T))),128))])],4)):S("",!0)]),_:1})]))],512))}};const V={class:"container"},H={__name:"testContentMenu",setup(r){const l=a(null),o=a(null),s=a(null);return(i,e)=>(u(),c("div",V,[d(h,{class:"block",menu:[{label:"添加"},{label:"编辑"},{label:"删除"},{label:"查看"},{label:"复制"}],onSelect:e[0]||(e[0]=t=>l.value=t.label)},{default:v(()=>[_("h2",null,f(l.value),1)]),_:1}),d(h,{class:"block",menu:[{label:"员工"},{label:"部门"},{label:"角色"},{label:"权限"},{label:"菜单"}],onSelect:e[2]||(e[2]=t=>o.value=t.label)},{default:v(()=>[_("h2",null,f(o.value),1),d(h,{class:"innerblock",menu:[{label:"菜单1"},{label:"菜单2"},{label:"菜单3"},{label:"菜单4"}],onSelect:e[1]||(e[1]=t=>s.value=t.label)},{default:v(()=>[_("h2",null,f(s.value),1)]),_:1})]),_:1})]))}};export{H as default};
