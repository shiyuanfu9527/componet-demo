import{x as u,k as _,r as w,e as x,f as v,o as a,c as i,F as y,v as E,q as p,b as M,u as k}from"./index-53063f40.js";const z=["src"],S=u({__name:"waterfall",setup(B){const g=Math.floor(Math.random()*50)+1;let r=_([{src:"",height:200,top:0,left:0},{src:"",height:400,top:0,left:0},{src:"",height:300,top:0,left:0},{src:"",height:250,top:0,left:0},{src:"",height:350,top:0,left:0},{src:"",height:200,top:0,left:0},{src:"",height:300,top:0,left:0},{src:"",height:350,top:0,left:0},{src:"",height:250,top:0,left:0},{src:"",height:400,top:0,left:0},{src:"",height:200,top:0,left:0},{src:"",height:400,top:0,left:0},{src:"",height:300,top:0,left:0},{src:"",height:250,top:0,left:0},{src:"",height:350,top:0,left:0},{src:"",height:200,top:0,left:0},{src:"",height:300,top:0,left:0},{src:"",height:350,top:0,left:0},{src:"",height:250,top:0,left:0},{src:"",height:400,top:0,left:0}]);fetch(`https://www.mxnzp.com/api/image/girl/list?page=${g}&app_id=sghs8pllwqmxilgc&app_secret=MXVSanhjMnB1eG1ubnExOEJQc3EvQT09`,{method:"GET"}).then(e=>e.json()).then(e=>{r.forEach((o,t)=>{o.src=e.data[t%10].imageUrl,o.height=e.data[t%10].imageSize.split("x")[1]/(Math.floor(Math.random()*3)+3)}),s()}).catch(e=>console.log(e));const f=w(),s=()=>{const e=f.value.clientWidth;console.log(e);const o=320,t=10,h=Math.floor(e/(o+t)),l=new Array(h).fill(0);r.forEach(n=>{const c=l.indexOf(Math.min(...l)),d=c*(o+t),m=l[c];l[c]+=n.height+t,n.top=m,n.left=d})};return x(()=>{s(),window.addEventListener("resize",()=>{s()})}),v(()=>{window.removeEventListener("resize",()=>{s()})}),(e,o)=>(a(),i("div",{class:"waterfall",ref_key:"waterfall",ref:f},[(a(!0),i(y,null,E(k(r),(t,h)=>(a(),i("div",{key:h,class:"item",style:p({top:t.top+"px",left:t.left+"px"})},[M("img",{src:t.src,style:p({height:t.height+"px"})},null,12,z)],4))),128))],512))}});export{S as default};
