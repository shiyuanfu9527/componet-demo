import{r as _,g as k,n as B,e as S,o as h,c as m,b as C,h as V,m as L,_ as N,i as T,w as I,j as M}from"./index-0761ca75.js";const $={__name:"autoEllipsis",props:{suffix:{type:Boolean,default:!1},startEllipsisLine:{type:Number,default:1},boundaryValue:{type:Number,default:0}},setup(c){const s=c,r=_(),i=_();let p="";const y=k(()=>!s.suffix&&s.startEllipsisLine===1);function x(e,t){const l=p;t.textContent=l,e.style.width="fit-contnet",e.style.whiteSpace="nowrap";const E=e.clientWidth,a=e.parentElement,n=(a==null?void 0:a.clientWidth)||(a==null?void 0:a.offsetWidth);if(E<=n){t.textContent=l,console.log("小于");return}else if(y.value)e.style.width=n+"px",e.style.whiteSpace="nowrap",e.style.textOverflow="ellipsis",e.style.overflow="hidden",console.log("走的是cssentirely true ");else{const v=t.offsetWidth,o=l.length,b=v/o,w=Math.floor(n*s.startEllipsisLine/b),f=o-w+1.5+s.boundaryValue,d=f/2,W=Math.floor(o/2-d),g=Math.ceil(o/2+d);switch(s.suffix){case!0:{t.textContent=l.slice(0,W)+"..."+l.slice(g);break}case!1:{t.textContent=l.slice(0,-f)+"...";break}}e.style.wordBreak="break-all",e.style.whiteSpace="normal"}}const u=new ResizeObserver(()=>{const e=r.value||document.getElementById("autoEllipsisWrapper");x(e,i.value)});return B(()=>{var t;p=((t=i.value)==null?void 0:t.innerText)??"";const e=document.getElementById("app");u.observe(e)}),S(()=>{u.unobserve(app)}),(e,t)=>(h(),m("div",L({id:"autoEllipsisWrapper",ref_key:"container",ref:r,style:{width:"fit-content"}},e.$attrs),[C("span",{ref_key:"text",ref:i},[V(e.$slots,"default")],512)],16))}};const O={class:"textEllipsis"},R={__name:"autoEllipsisWrapper",setup(c){return(s,r)=>(h(),m("div",O,[T($,{suffix:!0,"start-ellipsis-line":1},{default:I(()=>[M("测试中间省略的组件啊啊啊啊啊")]),_:1})]))}},z=N(R,[["__scopeId","data-v-f49484ec"]]);export{z as default};
